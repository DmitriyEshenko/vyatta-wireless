tag:
type: txt
help: Set wireless network interface
comp_help: Enter wireless network interface name (wlan0 - wlan99)
syntax:expression: pattern $VAR(@) "^wlan[0-9]+$" ; \
	 "Must be (wlan0 - wlan999)"

create: if [ ! -d /sys/class/net/$VAR(@) ]; then
	    ${vyatta_sbindir}/vyatta-wireless.pl --dev=$VAR(@) --create || exit 1
	fi
	sudo ip link set $VAR(@) up
	${vyatta_sbindir}/vyatta-link-detect $VAR(@) on

delete: [ -d /sys/class/net/$VAR(@) ] || exit 0
	if [ "$(./mode)" = "access-point" ]; then
	    sudo ${vyatta_sbindir}/vyatta-hostapd stop $VAR(@)
	fi			fi
        sudo ip link set $VAR(@) down
	${vyatta_sbindir}/vyatta-wireless.pl --dev=$VAR(@) --delete

end: if [ "$VAR(./mode)" = "access-point" ]; then
         case ${COMMIT_ACTION} in
     	 SET)    ${vyatta_sbindir}/vyatta-hostapd start $VAR(@) ;;
	 ACTIVE) ${vyatta_sbindir}/vyatta-hostapd reload $VAR(@) ;;
         esac
     fi
